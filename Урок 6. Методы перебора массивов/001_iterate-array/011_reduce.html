<!-- 
	Метод «arr.reduce(callback[, initialValue])» используется для последовательной обработки каждого элемента массива с сохранением промежуточного результата.
	Это один из самых сложных методов для работы с массивами. Но его стоит освоить, потому что временами с его помощью можно в несколько строк решить задачу, которая иначе потребовала бы в разы больше места и времени.
	
	Метод reduce используется для вычисления на основе массива какого-либо единого значения, иначе говорят «для свёртки массива». Чуть далее мы разберём пример для вычисления суммы.
	Он применяет функцию callback по очереди к каждому элементу массива слева направо, сохраняя при этом промежуточный результат.
	
	Аргументы функции callback(previousValue, currentItem, index, arr):
	previousValue – последний результат вызова функции, он же «промежуточный результат».
	currentItem – текущий элемент массива, элементы перебираются по очереди слева-направо.
	index – номер текущего элемента.
	arr – обрабатываемый массив.

	Кроме callback, методу можно передать «начальное значение» – аргумент initialValue. Если он есть, то на первом вызове значение previousValue будет равно initialValue, а если у reduce нет второго аргумента, то оно равно первому элементу массива, а перебор начинается со второго.
 -->
<!DOCTYPE html>
<html>

<head>
	<title>reduce</title>
</head>

<body>
	<script>
		var orders = [
			{ amount: 250, name: 'margarita' },
			{ amount: 400, name: 'juice' },
			{ amount: 100, name: 'french fries' },
			{ amount: 325, name: 'fried cheese' }
		];

		// var totalPrice = orders.reduceRight((sum, item) => {
		// 	console.log('sum: ' + sum);
		// 	console.log('item:  ' + item.amount);
		// 	return sum += item.amount;
		// }, 0);

		var totalPrice = orders.reduce((sum, item) => sum += item.amount, 0);


		console.log('totalPrice: ' + totalPrice);
		// console.log('#############################');

		// var totalPriceForLoop = 0;
		// for (var i = 0; i < orders.length; i++) {
		// 	totalPriceForLoop += orders[i].amount;
		// }

		// console.log('totalPriceForLoop: ' + totalPriceForLoop);

		// // using forEach

		// var totalAmountForEach = 0;

		// orders.forEach(o => {
		// 	totalAmountForEach += o.amount;
		// })

		// console.log('totalAmountForEach: ' + totalAmountForEach);




		// // Using for
		// var totalAmount = 0;
		// for (var i = 0; i < orders.length; i++) {
		// 	totalAmount += orders[i].amount;
		// }
		// console.log(totalAmount);

		// console.log('#############################');

		// // Using forEach
		// var totalAmount = 0;
		// orders.forEach((item) => {
		// 	totalAmount += item.amount
		// });
		// console.log(totalAmount);

		// // Using reduce
		// var totalAmount = orders.reduce(function (sum, item) {
		// 	return sum + item.amount;
		// }, 0);
		// console.log(totalAmount);

		// sum amount
		//  0    250
		// 250   400
		// 650   100
		// 750   325
		// 1075 

		// При первом запуске sum – исходное значение, с которого начинаются вычисления, равно нулю (второй аргумент reduce).
		// Сначала анонимная функция вызывается с этим начальным значением и первым элементом массива, результат запоминается и передаётся в следующий вызов, уже со вторым аргументом массива, затем новое значение участвует в вычислениях с третьим аргументом и так далее.
	</script>
</body>

</html>